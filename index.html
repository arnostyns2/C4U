<!DOCTYPE html>
<html lang="nl">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SMVQ8W2YFZ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-SMVQ8W2YFZ');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C4U.studio - Handgemaakte Juwelen</title>
    <link rel="icon" href="images/icon.png" type="image/png">
    <link rel="apple-touch-icon" href="images/icon.png">
    <meta name="theme-color" content="#ffffff">
    <!-- Mobile-first base styles (see docs/) -->
    <link rel="stylesheet" href="css/styles.base.css">
    <!-- Desktop-only overrides: grid-span webshop, webshop image contain -->
    <link rel="stylesheet" href="css/styles.desktop.css" media="screen and (min-width:1024px)">
</head>
<body>
    <div class="container">
        <header class="hero">
            <div class="hero-banner">
                <img src="images/backdrop_and_logo_banner.png" alt="C4U studio banner">
            </div>
            <div class="scroll-hint" aria-hidden="true">
                <div class="chev"></div>
            </div>
        </header>

        <div class="social-links" id="socialLinks"></div>

        <div class="products-preview">
            <div class="products-grid" id="productsGrid"></div>
            <div class="preview-fade"></div>
            <div class="preview-hint" aria-hidden="true">
                <div class="chev"></div>
                <div>Meer producten</div>
            </div>
        </div>

    </div>

    <script>
        // Data structuur (full-image buttons) - order tuned for funnel (Webshop first)
        const socialLinks = [
            { name: 'Webshop', image: 'images/link_images/webshop.png', url: 'https://crochets4u.be', desc: 'Koop hier: zelfgemaakt 3D ornaments, juwelen, patronen, etc.' },
            { name: 'Instagram', image: 'images/link_images/instagram.png', url: 'https://www.instagram.com/c4u.studio/', desc: 'Behind the scenes & finished pieces' },
            { name: 'Pinterest', image: 'images/link_images/pinterest.png', url: 'https://www.pinterest.com/crochets4U/', desc: 'Collecties & inspiratie' },
            { name: 'Facebook', image: 'images/link_images/facebook.png', url: 'https://www.facebook.com/search/top?q=c4ustudio', desc: 'Community updates' },
            { name: 'YouTube', image: 'images/link_images/youtube.png', url: 'https://youtube.com/@crochets4u', desc: 'Tutorials & maker video' }
        ];

        const products = [
            {
                id: 1,
                name: 'Leaf Earrings – Nature Inspired Jewelry',
                description: 'Elegant leaf shape inspired by nature',
                price: 'FREE DOWNLOAD',
                link: 'https://makerworld.com/en/models/2082822-leaf-earrings-nature-inspired-jewelry#profileId-2250876',
                images: [
                    'images/earring_leaf/productimagemodelleaf.png',
                    'images/earring_leaf/leaf_ring.webp'
                ]
            },
            {
                id: 2,
                name: 'Geometric Heart Earrings',
                description: 'Modern geometric heart design',
                price: 'FREE DOWNLOAD',
                link: 'https://makerworld.com/en/models/2090918-geometric-heart-earrings#profileId-2260232',
                images: [
                    'images/earring_heart/productimagemodelheart.png',
                    'images/earring_heart/heart_ring.webp'
                ]
            }
        ];

        // Render social links (add small top icon for supported platforms)
        function renderSocialLinks() {
            const container = document.getElementById('socialLinks');
            const isMobile = window.innerWidth <= 768;

            // map platform names to small icon files in images/icons/
            const topIcons = {
                'Instagram': 'images/icons/instagram.png',
                'Facebook': 'images/icons/facebook.png',
                'Pinterest': 'images/icons/pinterest.png',
                'YouTube': 'images/icons/youtube.png'
            };

            container.innerHTML = socialLinks.map((link, index) => {
                    const isPrimary = link.name === 'Webshop';
                    const bg = link.image ? `background-image: url('${link.image}');` : '';
                    const iconSrc = topIcons[link.name] || '';
                    const titleRow = iconSrc ? `
                            <div class="social-title-row">
                                <img src="${iconSrc}" alt="${link.name} icon" class="social-title-icon">
                                <div class="platform">${link.name}</div>
                            </div>
                        ` : `
                            <div class="social-title-row">
                                <div class="platform">${link.name}</div>
                            </div>
                        `;

                    const overlayClass = iconSrc ? ' has-overlay' : '';
                    const primaryClass = isPrimary ? ' primary' : '';
                    const descHtml = isPrimary ? `<div class="social-desc">${link.desc || ''}</div>` : '';

                    return `
                    <a href="${link.url}" 
                       class="social-link fade-in${overlayClass}${primaryClass}" 
                       aria-label="Open ${link.name} - ${link.desc}"
                       onclick="trackLinkClick('${link.name}','${link.url}')"
                       target="${isMobile ? '_self' : '_blank'}"
                       style="${bg} animation-delay: ${index * 0.08}s">
                        <div class="overlay"></div>
                        <div class="social-text">
                            ${titleRow}
                            ${descHtml}
                        </div>
                        ${isPrimary ? `<div class="social-cta">Shop nu</div>` : ''}
                    </a>`;
            }).join('');
        }

        // Image gallery class
        class ImageGallery {
            constructor(productId, images) {
                this.productId = productId;
                this.images = images;
                this.currentIndex = 0;
            }

            render() {
                return `
                    <div class="image-gallery" id="gallery-${this.productId}">
                        <div class="gallery-images" id="images-${this.productId}">
                            ${this.images.map(img => `
                                <img src="${img}" alt="Product" class="gallery-image">
                            `).join('')}
                        </div>
                        ${this.images.length > 1 ? `
                            <button class="gallery-nav prev" onclick="event.stopPropagation(); galleries[${this.productId}].prev()">‹</button>
                            <button class="gallery-nav next" onclick="event.stopPropagation(); galleries[${this.productId}].next()">›</button>
                            <div class="gallery-dots">
                                ${this.images.map((_, i) => `
                                    <div class="dot ${i === 0 ? 'active' : ''}" onclick="event.stopPropagation(); galleries[${this.productId}].goTo(${i})"></div>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                `;
            }

            updateGallery() {
                const container = document.getElementById(`images-${this.productId}`);
                container.style.transform = `translateX(-${this.currentIndex * 100}%)`;
                
                const dots = document.querySelectorAll(`#gallery-${this.productId} .dot`);
                dots.forEach((dot, i) => {
                    dot.classList.toggle('active', i === this.currentIndex);
                });
            }

            next() {
                this.currentIndex = (this.currentIndex + 1) % this.images.length;
                this.updateGallery();
            }

            prev() {
                this.currentIndex = (this.currentIndex - 1 + this.images.length) % this.images.length;
                this.updateGallery();
            }

            goTo(index) {
                this.currentIndex = index;
                this.updateGallery();
            }

            // Touch swipe support
            setupTouchSwipe() {
                const gallery = document.getElementById(`gallery-${this.productId}`);
                let touchStartX = 0;
                let touchEndX = 0;

                gallery.addEventListener('touchstart', (e) => {
                    touchStartX = e.changedTouches[0].screenX;
                }, { passive: true });

                gallery.addEventListener('touchend', (e) => {
                    touchEndX = e.changedTouches[0].screenX;
                    this.handleSwipe(touchStartX, touchEndX);
                }, { passive: true });
            }

            handleSwipe(startX, endX) {
                const swipeThreshold = 50;
                const diff = startX - endX;

                if (Math.abs(diff) > swipeThreshold) {
                    if (diff > 0) {
                        this.next();
                    } else {
                        this.prev();
                    }
                }
            }
        }

        // Store galleries globally
        const galleries = {};

        // Render products
        function renderProducts() {
            const container = document.getElementById('productsGrid');
            const isMobile = window.innerWidth <= 768;
            
            products.forEach(product => {
                galleries[product.id] = new ImageGallery(product.id, product.images);
            });

            container.innerHTML = products.map((product, index) => `
                <div class="product-card fade-in" 
                     onclick="navigateToProduct('${product.link}', ${isMobile})"
                     style="animation-delay: ${(index + 6) * 0.1}s">
                    ${galleries[product.id].render()}
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <p class="product-description">${product.description}</p>
                        ${product.price === 'FREE DOWNLOAD' ?
                            `<div class="product-price free">${product.price}</div>` :
                            `<div class="product-price">${product.price} per set</div>`
                        }
                    </div>
                </div>
            `).join('');

            // Setup touch swipe for each gallery
            products.forEach(product => {
                galleries[product.id].setupTouchSwipe();
            });
        }

        // Navigate to product page
        function navigateToProduct(link, isMobile) {
            // Track product click
            if (typeof gtag === 'function') {
                try { gtag('event', 'select_content', { content_type: 'product', item_id: link }); } catch (e) { /* noop */ }
            }

            if (isMobile) {
                window.location.href = link;
            } else {
                window.open(link, '_blank');
            }
        }

        // Track outbound/social link clicks for GA behavioral analysis
        function trackLinkClick(name, url) {
            if (typeof gtag === 'function') {
                try {
                    gtag('event', 'select_content', {
                        event_category: 'funnel_link',
                        event_label: name,
                        content_type: 'link',
                        item_id: name,
                        destination: url
                    });
                } catch (e) { /* noop */ }
            }
        }

        // Initialize
        renderSocialLinks();
        renderProducts();

        // Re-render on resize for responsive target behavior
        window.addEventListener('resize', () => {
            renderSocialLinks();
            renderProducts();
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') {
                Object.values(galleries).forEach(g => g.prev());
            } else if (e.key === 'ArrowRight') {
                Object.values(galleries).forEach(g => g.next());
            }
        });

        // Auto-play galleries (optional)
        let autoPlayInterval;
        function startAutoPlay() {
            autoPlayInterval = setInterval(() => {
                Object.values(galleries).forEach(g => g.next());
            }, 5000);
        }

        // Pause on hover
        document.querySelectorAll('.image-gallery').forEach(gallery => {
            gallery.addEventListener('mouseenter', () => clearInterval(autoPlayInterval));
            gallery.addEventListener('mouseleave', startAutoPlay);
        });

        startAutoPlay();
    </script>
</body>
    <link rel="stylesheet" href="css/styles.base.css">
    <link rel="stylesheet" href="css/styles.desktop.css" media="screen and (min-width:1024px)">